<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="generator" content="pandoc">
  <meta name="author" content="Manuel Montenegro Montes">
  <title>Gestión de proyectos de Elixir con mix</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="dist/reset.css">
  <link rel="stylesheet" href="dist/reveal.css">
  <link rel="stylesheet" href="css/nnfx-light.min.css">
  <style>
    .reveal .sourceCode {  /* see #7635 */
      overflow: visible;
    }
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {  background-color: #f8f8f8; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ef2929; } /* Alert */
    code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #204a87; } /* Attribute */
    code span.bn { color: #0000cf; } /* BaseN */
    code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4e9a06; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #8f5902; font-style: italic; } /* Comment */
    code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
    code span.dt { color: #204a87; } /* DataType */
    code span.dv { color: #0000cf; } /* DecVal */
    code span.er { color: #a40000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #0000cf; } /* Float */
    code span.fu { color: #204a87; font-weight: bold; } /* Function */
    code span.im { } /* Import */
    code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
    code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
    code span.ot { color: #8f5902; } /* Other */
    code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
    code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
    code span.ss { color: #4e9a06; } /* SpecialString */
    code span.st { color: #4e9a06; } /* String */
    code span.va { color: #000000; } /* Variable */
    code span.vs { color: #4e9a06; } /* VerbatimString */
    code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="css/pdap.css" id="theme">
</head>
<body>
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="img/RedBackground.jpg">
  <h1 class="title">Gestión de proyectos de Elixir con
<code>mix</code></h1>
<div id="author-container">
<div class="author">
Manuel Montenegro Montes
<br>
<span id="email"><a href="montenegro@fdi.ucm.es">montenegro@fdi.ucm.es</a></span>
</div>
<div class="subject">
<strong>Programación Declarativa Aplicada</strong>
<br>Máster en Ingeniería Informática<br>Facultad de
Informática<br>Universidad Complutense de Madrid
</div>
</div>
</section>

<section id="section" class="slide level2 outline"
data-background-image="img/RedBackground.jpg">
<h2 class="outline" data-background-image="img/RedBackground.jpg"></h2>
<ol type="1">
<li>La herramienta <span
style="text-transform:none; font-family: monospace;">mix</span></li>
<li>Gestión de dependencias</li>
<li>Uso e importación de módulos</li>
<li>Documentación de proyectos (<span
style="text-transform:none; font-family: monospace;">exdoc</span>)</li>
</ol>
</section>
<section>
<section id="la-herramienta-mix" class="title-slide slide level1">
<h1>La herramienta <code>mix</code></h1>

</section>
<section id="la-herramienta-mix-1" class="slide level2">
<h2>La herramienta <code>mix</code></h2>
<ul>
<li><p><code>mix</code> es una herramienta de línea de comandos
para:</p>
<ul>
<li>Crear y gestionar proyectos en Elixir</li>
<li>Compilar código</li>
<li>Ejecutar casos de prueba</li>
<li>Formatear código</li>
<li>Administrar dependencias</li>
<li>Generar documentación</li>
<li>etc.</li>
</ul></li>
<li><p>Está incluida en el entorno de desarrollo Elixir.</p></li>
</ul>
</section>
<section class="slide level2">

<h3 id="equivalentes-en-otros-lenguajes">Equivalentes en otros
lenguajes</h3>
<p><code>mix</code> tiene una funcionalidad similar a:</p>
<ul>
<li><em>NPM</em> en el ecosistema JavaScript/Node.js</li>
<li><em>Maven</em>/<em>Gradle</em> en el ecosistema Java/Kotlin</li>
<li><em>Cargo</em> en el ecosistema Rust</li>
<li><em>NuGet</em> en el ecosistema .NET</li>
</ul>
</section>
<section id="creación-de-nuevos-proyectos" class="slide level2">
<h2>Creación de nuevos proyectos</h2>
<ul>
<li><p>Para crear un nuevo proyecto:</p>
<pre class="text"><code>mix new <span class="meta">nombre_proyecto</span></code></pre>
</li>
<li><p>Genera un directorio con el <code>nombre_proyecto</code> dado,
con un esqueleto para el proyecto.</p></li>
<li><p>Contenidos del directorio:</p></li>
</ul>
<p><img data-src="15/Directorio.png" /></p>
</section>
<section id="estructura-de-un-proyecto-mix" class="slide level2">
<h2>Estructura de un proyecto <code>mix</code></h2>
<ul>
<li style="list-style-image: url(15/folder.png);">
<p><code>lib</code></p>
Ficheros <code>.ex</code> con el código fuente Elixir del proyecto.
</li>
<li style="list-style-image: url(15/folder.png);">
<p><code>test</code></p>
Ficheros <code>.exs</code> con casos de prueba unitarios.
</li>
<li style="list-style-image: url(15/file.png);">
<p><code>mix.exs</code></p>
Configuración del proyecto: nombre, dependencias, etc.
</li>
</ul>
</section>
<section class="slide level2">

<ul>
<li style="list-style-image: url(15/folder.png);">
<p><code>_build</code></p>
Ficheros <code>.beam</code> resultantes de compilar el proyecto y sus
dependencias
</li>
<li style="list-style-image: url(15/folder.png);">
<p><code>deps</code></p>
Código fuente de las dependencias del proyecto
</li>
<li style="list-style-image: url(15/file.png);">
<p><code>.formatter.exs</code></p>
Configuración de la herramienta de formato de código Elixir
</li>
</ul>
</section>
<section class="slide level2">

<p>Otros directorios:</p>
<ul>
<li style="list-style-image: url(15/folder.png);">
<p><code>config</code></p>
Ficheros de configuración de la aplicación. Las opciones son accesibles
desde <a
href="https://hexdocs.pm/elixir/Application.html#fetch_env/2"><code>Application.fetch_env/2</code></a>.
</li>
<li style="list-style-image: url(15/folder.png);">
<p><code>priv</code></p>
Recursos de la aplicación (imágenes, datos, etc.) Directorio accesible
mediante <a
href="https://www.erlang.org/doc/apps/kernel/code.html#priv_dir/1"><code>:code.priv_dir/1</code></a>.
</li>
</ul>
</section>
<section id="comandos-de-mix" class="slide level2">
<h2>Comandos de <code>mix</code></h2>
<p>Una vez situados en el directorio del proyecto, podemos utilizar los
siguientes comandos de <code>mix</code>:</p>
<ul>
<li><p><code>mix compile</code></p>
<ul>
<li>Compila el código fuente del proyecto</li>
</ul></li>
<li><p><code>iex -S mix</code></p>
<ul>
<li><p>Abre un intérprete de línea de comandos Elixir. Desde este
intérprete pueden accederse a las funciones de los módulos del
proyecto.</p></li>
<li><p>Utilizar el comando <code>recompile</code> cada vez que se hagan
cambios en el código fuente.</p></li>
</ul></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li><p><code>mix test</code></p>
<ul>
<li>Ejecuta los casos de prueba del directorio <code>test/</code></li>
</ul></li>
<li><p><code>mix format</code></p>
<ul>
<li><p>Formatea el código fuente, siguiendo las convenciones habituales
de código Elixir.</p></li>
<li><p>Puede configurarse a través del fichero
<code>.formatter.exs</code></p></li>
</ul></li>
<li><p><code>mix clean</code></p>
<ul>
<li>Elimina los ficheros <code>.beam</code> procedentes de la
compilación.</li>
</ul></li>
</ul>
</section></section>
<section>
<section id="gestión-de-dependencias" class="title-slide slide level1">
<h1>Gestión de dependencias</h1>

</section>
<section id="el-gestor-de-paquetes-hex" class="slide level2">
<h2>El gestor de paquetes <code>hex</code></h2>
<ul>
<li><p><em>Hex</em> es un gestor de paquetes destinado a los lenguajes
de la máquina BEAM.</p>
<ul>
<li>En Elixir, se accede a través de <code>mix</code>.</li>
</ul></li>
<li><p>El repositorio <a href="https://hex.pm/">hex.pm</a> contiene más
de 20000 paquetes disponibles.</p></li>
</ul>
<p><img data-src="15/hex.png" style="width:50.0%" /></p>
</section>
<section id="incorporar-librerías-a-un-proyecto" class="slide level2">
<h2>Incorporar librerías a un proyecto</h2>
<ul>
<li><p>Basta con indicar las librerías a incorporar en la función
<code>deps/0</code> del fichero <code>mix.exs</code>. Por ejemplo:</p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="kw">defp</span> deps <span class="kw">do</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="ot">[</span></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>    <span class="hl"><span class="fu">{</span><span class="va">:csv</span>, <span class="st">&quot;~&gt; 3.2&quot;</span><span class="fu">}</span></span>    <span class="arrow_box_left"> Dependencia añadida </span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>

<p>La especificación de versión <code>~&gt; 3.2</code> significa «igual
o posterior a la versión <code>3.2.x</code>, pero anterior a la versión
<code>4.0</code>».</p>
<p>Especificación de versiones: <a
href="https://hexdocs.pm/elixir/Version.html">[+]</a></p></li>
</ul>
</section>
<section class="slide level2">

<ul>
<li><p>Una vez añadidas las librerías al fichero <code>mix.exs</code>,
se descargan mediante el comando <code>deps.get</code> de
<code>mix</code>:</p>
<pre><code>&gt; mix deps.get
Resolving Hex dependencies...
Resolution completed in 0.02s
New:
  csv 3.2.1
* Getting csv (Hex package)</code></pre>
<dl>
</dl></li>
<li><p>Las librerías se compilarán la próxima vez que se compile el
proyecto. Si se desea forzar la compilación, puede utilizarse el comando
<code>deps.compile</code> de <code>mix</code>.</p></li>
</ul>
</section></section>
<section>
<section id="uso-e-importación-de-módulos"
class="title-slide slide level1">
<h1>Uso e importación de módulos</h1>

</section>
<section id="caso-general-no-hace-falta-nada" class="slide level2">
<h2>Caso general: ¡no hace falta nada!</h2>
<ul>
<li><p>Para llamar a una función de otro módulo (ya sea del mismo
proyecto o de una dependencia), basta con indicar el
<strong>nombre</strong> del módulo <strong>en el momento de la
llamada</strong>.</p>
<ul>
<li>No es necesario importar el módulo previamente.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb4"><pre
class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> leer_csv<span class="fu">()</span> <span class="kw">do</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="hl"><span class="cn">File</span><span class="op">.</span>stream!</span><span class="fu">(</span><span class="st">&quot;mi_fichero.csv&quot;</span><span class="fu">)</span>    <span class="arrow_box_left"> File: módulo de librería estándar </span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="op">|&gt;</span> <span class="hl"><span class="cn">CSV</span><span class="op">.</span>decode!</span><span class="fu">(</span><span class="va">headers:</span> <span class="cn">true</span><span class="fu">)</span>     <span class="arrow_box_left"> CSV: Módulo de dependencia externa (csv) </span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>

<p><span class="rojo"><em>Excepción: llamadas a <strong>macros</strong>
definidas en otros módulos</em></span></p>
</section>
<section class="slide level2">

<ul>
<li><p>Sin embargo, hay directivas en Elixir que facilitan el uso de
módulos:</p>
<ul>
<li><code>alias</code></li>
<li><code>require</code></li>
<li><code>import</code></li>
<li><code>use</code></li>
</ul></li>
<li><p>Más información: <a
href="https://hexdocs.pm/elixir/alias-require-and-import.html">[+]</a></p></li>
</ul>
</section>
<section id="directiva-alias" class="slide level2">
<h2>Directiva <code>alias</code></h2>
<ul>
<li>Permite referirse a un módulo ya existente mediante un nombre
distinto:</li>
</ul>
<div class="sourceCode" id="cb5"><pre
class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">defmodule</span> <span class="cn">MiProyecto</span> <span class="kw">do</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="hl">alias <span class="cn">Enum</span>, <span class="va">as:</span> <span class="cn">EN</span></span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> func<span class="fu">(</span>xs<span class="fu">)</span> <span class="kw">do</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>    <span class="hl"><span class="cn">EN</span><span class="op">.</span></span>map<span class="fu">(</span>xs, <span class="op">&amp;</span><span class="fu">(</span><span class="op">&amp;</span><span class="dv">1</span> <span class="op">+</span> <span class="dv">1</span><span class="fu">))</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">end</span></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> otra<span class="fu">(</span>xs<span class="fu">)</span> <span class="kw">do</span></span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a>    <span class="hl"><span class="cn">Enum</span><span class="op">.</span></span>map<span class="fu">(</span>xs, <span class="op">&amp;</span><span class="fu">(</span><span class="op">&amp;</span><span class="dv">1</span> <span class="op">+</span> <span class="dv">1</span><span class="fu">))</span>  <span class="arrow_box_left"> El nombre original sigue estando disponible </span></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a>  <span class="kw">end</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>

</section>
<section class="slide level2">

<h3 id="alias-con-módulos-anidados"><code>alias</code> con módulos
anidados</h3>
<ul>
<li>La directiva <code>alias</code> es útil cuando accedemos a funciones
en módulos anidados.
<ul>
<li>Nos ahorra tener que teclear el nombre completo del módulo.</li>
</ul></li>
</ul>
<div class="sourceCode" id="cb6"><pre
class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="kw">defmodule</span> <span class="cn">Gestion</span> <span class="kw">do</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> fun<span class="fu">()</span> <span class="kw">do</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>    <span class="hl"><span class="cn">MiProyecto</span><span class="op">.</span><span class="cn">Usuarios</span><span class="op">.</span><span class="cn">Gestion</span></span><span class="op">.</span>añadir<span class="fu">(</span><span class="st">&quot;Bertoldo&quot;</span><span class="fu">)</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">end</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>

<div class="sourceCode" id="cb7"><pre
class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="kw">defmodule</span> <span class="cn">Gestion</span> <span class="kw">do</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="hl">alias <span class="cn">MiProyecto</span><span class="op">.</span><span class="cn">Usuarios</span><span class="op">.</span><span class="cn">Gestion</span></span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># equivale a: `alias MiProyecto.Usuarios.Gestion, as: Gestion`</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> fun<span class="fu">()</span> <span class="kw">do</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="hl"><span class="cn">Gestion</span></span><span class="op">.</span>añadir<span class="fu">(</span><span class="st">&quot;Bertoldo&quot;</span><span class="fu">)</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a>  <span class="kw">end</span></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>

</section>
<section id="directiva-require" class="slide level2">
<h2>Directiva <code>require</code></h2>
<ul>
<li><p>Como ya hemos visto, en Elixir podemos utilizar cualquier función
haciendo referencia a su módulo, sin necesidad de importarlo
previamente.</p></li>
<li><p>Sin embargo, para utilizar una <strong>macro</strong> es
necesario indicar (mediante <code>require</code>) el módulo al que
pertenece.</p></li>
</ul>
<div class="sourceCode" id="cb8"><pre
class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="kw">defmodule</span> <span class="cn">MiModulo</span> <span class="kw">do</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="hl">require <span class="cn">Logger</span></span>  <span class="arrow_box_left"> Para la macro `debug/1` </span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="hl">require <span class="cn">Integer</span></span> <span class="arrow_box_left"> Para la macro `is_even/1` </span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> fun<span class="fu">(</span>x<span class="fu">)</span> <span class="kw">when</span> <span class="cn">Integer</span><span class="op">.</span>is_even<span class="fu">(</span>x<span class="fu">)</span>, <span class="va">do:</span> <span class="cn">Logger</span><span class="op">.</span>debug<span class="fu">(</span><span class="st">&quot;Todo bien&quot;</span><span class="fu">)</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> fun<span class="fu">(</span>x<span class="fu">)</span>, <span class="va">do:</span> <span class="cn">Logger</span><span class="op">.</span>error<span class="fu">(</span><span class="st">&quot;Recibido número impar&quot;</span><span class="fu">)</span></span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>

</section>
<section id="directiva-import" class="slide level2">
<h2>Directiva <code>import</code></h2>
<ul>
<li>Permite utilizar las funciones de un módulo sin tener que indicar el
nombre de este.</li>
</ul>
<div class="sourceCode" id="cb9"><pre
class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="kw">defmodule</span> <span class="cn">MiModulo</span> <span class="kw">do</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="hl">import <span class="cn">Enum</span></span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> funcion<span class="fu">(</span>xs<span class="fu">)</span> <span class="kw">do</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>    xs <span class="op">|&gt;</span> <span class="hl">map</span><span class="fu">(</span><span class="op">&amp;</span><span class="fu">(</span><span class="op">&amp;</span><span class="dv">1</span> <span class="op">+</span> <span class="dv">1</span><span class="fu">))</span> <span class="op">|&gt;</span> <span class="hl">filter</span><span class="fu">(</span><span class="op">&amp;</span><span class="fu">(</span><span class="op">&amp;</span><span class="dv">1</span> <span class="op">&lt;</span> <span class="dv">0</span><span class="fu">))</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">end</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>

</section>
<section class="slide level2">

<ul>
<li><p>Es preferible no abusar de <code>import</code> para que sea
explícito el módulo del cual provienen las funciones a las que
llamamos.</p></li>
<li><p>Como alternativa, es posible restringir la importación a
<strong>algunas</strong> funciones de un módulo:</p></li>
</ul>
<div class="sourceCode" id="cb10"><pre
class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="cn">Enum</span>, <span class="hl"><span class="va">only:</span> <span class="ot">[</span><span class="va">map:</span> <span class="dv">2</span>, <span class="va">filter:</span> <span class="dv">2</span><span class="ot">]</span></span>    <span class="arrow_box_left"> Solo importamos map/2 y filter/2 </span></span></code></pre></div>

</section>
<section class="slide level2">

<ul>
<li><p>También es posible importar todas las funciones,
<strong>excepto</strong> las que indiquemos explícitamente:</p>
<div class="sourceCode" id="cb11"><pre
class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="cn">Enum</span>, <span class="hl"><span class="va">except:</span> <span class="ot">[</span><span class="va">filter:</span> <span class="dv">2</span><span class="ot">]</span></span>    <span class="arrow_box_left"> Importamos todas excepto filter/2 </span></span></code></pre></div>
</li>
<li><p>Esto es útil, a veces, para ocultar algunas de las funciones
predefinidas.</p>
<ul>
<li>Estas funciones pertenecen al módulo <code>Kernel</code>, que se
importa automáticamente.</li>
</ul>
<div class="sourceCode" id="cb12"><pre
class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> <span class="cn">Kernel</span>, <span class="va">except:</span> <span class="ot">[</span><span class="va">length:</span> <span class="dv">1</span><span class="ot">]</span>  <span class="arrow_box_left"> Ocultamos función predefinida length/1 </span></span></code></pre></div>
</li>
</ul>
</section>
<section id="macro-use" class="slide level2">
<h2>Macro <code>use</code></h2>
<div class="sourceCode" id="cb13"><pre
class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="kw">defmodule</span> <span class="cn">MiProyecto</span> <span class="kw">do</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="im">use</span> <span class="meta"><span class="cn">Modulo</span></span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>

<ul>
<li><p>Cuando utilizamos <code>use</code>, el <code>Modulo</code>
indicado puede <strong>inyectar</strong> código en nuestro módulo.</p>
<ul>
<li>El código inyectado puede consistir en directivas
<code>import</code>, directivas <code>alias</code>, funciones, etc.</li>
</ul></li>
<li><p>Útil cuando se utilizan <em>frameworks</em>.</p>
<ul>
<li>Normalmente es la documentación del módulo la que nos indica si
debemos realizar <code>use</code> sobre él para utilizarlo.</li>
</ul></li>
</ul>
</section>
<section class="slide level2">

<h3 id="ejemplo">Ejemplo</h3>
<div class="sourceCode" id="cb14"><pre
class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="kw">defmodule</span> <span class="cn">MiProyectoTest</span> <span class="kw">do</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="hl">use <span class="cn">ExUnit</span><span class="op">.</span><span class="cn">Case</span></span>  <span class="arrow_box_left"> Inyecta directiva 'import' sobre macros test/2, assert/1, etc. </span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  test <span class="st">&quot;Caso de prueba 1&quot;</span> <span class="kw">do</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    assert length<span class="fu">(</span><span class="ot">[</span><span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">3</span><span class="ot">]</span><span class="fu">)</span> <span class="op">==</span> <span class="dv">3</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>  <span class="kw">end</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>

</section></section>
<section>
<section id="documentación-de-proyectos-exdoc"
class="title-slide slide level1">
<h1>Documentación de proyectos (<code>exdoc</code>)</h1>

</section>
<section id="la-librería-exdoc" class="slide level2">
<h2>La librería <code>exdoc</code></h2>
<ul>
<li><p>Exdoc es una herramienta que permite generar documentación en
formato HTML para nuestros proyectos.</p></li>
<li><p>La documentación generada tiene un formato similar a la
documentación de la <a href="https://hexdocs.pm/elixir/">librería
estándar</a> de Elixir.</p></li>
</ul>
</section>
<section id="incluir-exdoc-en-nuestro-proyecto" class="slide level2">
<h2>Incluir <code>exdoc</code> en nuestro proyecto</h2>
<ul>
<li><p>Basta con añadir la dependencia correspondiente a la función
<code>deps/0</code> definida en el fichero <code>mix.exs</code>.</p>
<div class="sourceCode" id="cb15"><pre
class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> deps <span class="kw">do</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>  <span class="ot">[</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>      <span class="op">...</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>      <span class="hl"><span class="fu">{</span><span class="va">:ex_doc</span>, <span class="st">&quot;~&gt; 0.34&quot;</span>, <span class="va">only:</span> <span class="va">:dev</span>, <span class="va">runtime:</span> <span class="cn">false</span><span class="fu">}</span></span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="ot">]</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>

<ul>
<li><p><code>'only: dev'</code> significa que solamente se hará uso de
esta librería en entornos de desarrollo (no en entornos de
<em>testing</em> ni de producción).</p></li>
<li><p><code>'runtime: false'</code> significa que no formará parte de
nuestra aplicación cuando se ejecute (ya que solamente sirve para
desarrollo).</p></li>
</ul></li>
</ul>
</section>
<section id="escribir-documentación" class="slide level2">
<h2>Escribir documentación</h2>
<ul>
<li>Se hace mediante los atributos <code>@moduledoc</code> y
<code>@doc</code></li>
</ul>
<div class="sourceCode" id="cb16"><pre
class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="kw">defmodule</span> <span class="cn">MiProyecto</span> <span class="kw">do</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="ot">@moduledoc &quot;&quot;&quot;</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="co">    Funciones básicas a incorporar en mi proyecto.</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="co">    La documentación puede ser escrita en formato </span>*Markdown*</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a><span class="co">  </span><span class="ot">&quot;&quot;&quot;</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>  <span class="ot">@doc &quot;&quot;&quot;</span></span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a><span class="co">    Devuelve el resultado de incrementar el valor </span><span class="in">`x`</span><span class="co"> pasado</span></span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a><span class="co">    como parámetro</span></span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a><span class="co">  </span><span class="ot">&quot;&quot;&quot;</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="kw">def</span> incrementar<span class="fu">(</span>x<span class="fu">)</span> <span class="kw">do</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a>    x <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a>  <span class="kw">end</span></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>

</section>
<section id="generar-documentación" class="slide level2">
<h2>Generar documentación</h2>
<ul>
<li><p>La documentación se genera ejecutando <code>mix docs</code> en el
directorio del proyecto.</p>
<pre class="text"><code>&gt; mix docs
Generating docs...
View &quot;html&quot; docs at &quot;doc/index.html&quot;
View &quot;epub&quot; docs at &quot;doc/mi_proyecto.epub&quot;</code></pre>
</li>
</ul>
<p><img data-src="15/Documentacion.png"
style="border: 1px solid black" /></p>
</section>
<section id="doctests" class="slide level2">
<h2><em>Doctests</em></h2>
<ul>
<li>Es habitual, a la hora de documentar una función, dar ejemplos de su
comportamiento en una hipotética sesión de <code>iex</code>:</li>
</ul>
<div class="sourceCode" id="cb18"><pre
class="sourceCode elixir"><code class="sourceCode elixir"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="ot">@doc &quot;&quot;&quot;</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="co">  Devuelve el resultado de incrementar el valor </span><span class="in">`x`</span><span class="co"> pasado como parámetro</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co">    <span class="hl">iex&gt; incrementar(3)</span></span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="co">    <span class="hl">4</span></span></span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a><span class="co">    <span class="hl">iex&gt; incrementar(4)</span></span></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co">    <span class="hl">5</span></span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="ot">&quot;&quot;&quot;</span></span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a><span class="kw">def</span> incrementar<span class="fu">(</span>x<span class="fu">)</span> <span class="kw">do</span></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a>  x <span class="op">+</span> <span class="dv">1</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span></code></pre></div>

</section>
<section class="slide level2">

<ul>
<li><p>Estos pequeños ejemplos de <code>iex</code> pueden ser utilizados
como casos de prueba.</p></li>
<li><p>Más información: <a
href="https://hexdocs.pm/elixir/docs-tests-and-with.html#doctests">Doctests</a>.</p></li>
</ul>
</section></section>
    </div>
  </div>

  <script src="dist/reveal.js"></script>

  <!-- reveal.js plugins -->
  <script src="plugin/notes/notes.js"></script>
  <script src="plugin/search/search.js"></script>
  <script src="plugin/zoom/zoom.js"></script>
  <script src="plugin/highlight/highlight.js"></script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
        // Display controls in the bottom right corner
        controls: true,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: true,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'bottom-right',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: false,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: true,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'default',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Prints all fragments in their visible states on the same slide 
        pdfSeparateFragments: false,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: true,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'slide',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'fade',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // reveal.js plugins
        plugins: [
          RevealNotes,
          RevealSearch,
          RevealZoom,
          // RevealHighlight          
        ]
      });
    </script>
    </body>
</html>
